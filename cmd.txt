docker run -d --name postgres -v postgres-volume:/var/lib/postgresql/data -e LANG='zh_CN.utf8' -e LC_ALL='zh_CN.utf8' -e POSTGRES_PASSWORD='postgres' -e POSTGRES_INITDB_ARGS='--encoding=UTF-8 --lc-collate=zh_CN.utf8 --lc-ctype=zh_CN.utf8' -p 5432:5432 postgres-zh-vec-rb

docker exec -it postgres psql -U postgres -d postgres

insert into data_sources values ('1', 'default_datasource', 'PostgreSQL', '{ "host": "localhost", "port": "5432", "database": "concise", "username": "postgres", "password": "postgres" }', default, default, 1);
insert into data_sources values ('1', 'default_datasource', 'PostgreSQL', '{ "host": "postgresql", "port": "5432", "database": "postgres", "username": "postgres", "password": "difyai123456" }', default, default, 1);

insert into data_tables values ('1', '1', '1', 'dwd_promotion_activity_di_1d', '促销活动', default, default);
insert into data_tables values ('2', '1', '1', 'dwd_rival_stats_distincted_di_1d', '竞对去重', default, default);
insert into data_tables values ('3', '1', '1', 'dwd_store_common_commodity_di_1d', '门店商品', default, default);
insert into data_tables values ('4', '1', '1', 'dwd_store_common_commodity_extra_di_1d', '保定标卡', default, default);
insert into data_tables values ('5', '1', '1', 'dwd_store_common_meituan_commodity_category_di_1d', '美团类目', default, default);
insert into data_tables values ('6', '1', '1', 'dwd_store_sales_commodity_availability_di_1d', '保定标卡门店上下架信息', default, default);
insert into data_tables values ('7', '1', '1', 'dwd_store_sales_commodity_stats_di_1d', '门店日销售数据(品类Sheet)', default, default);
insert into data_tables values ('8', '1', '1', 'dws_daily_store_commodity_stats', '每日商品销售统计', default, default);
insert into data_tables values ('99999', '1', '1', 'test', 'test', default, default);

insert into data_table_columns values ('999990', '99999', 0, 'a', 'a', 'VARCHAR', FALSE, '1', FALSE, default, default);
insert into data_table_columns values ('999991', '99999', 1, 'dt', 'dt', 'VARCHAR', FALSE, '20251231', TRUE, default, default);

create table test (
  a varchar(255) not null,
  dt varchar(255) not null
);

CREATE EXTENSION IF NOT EXISTS roaringbitmap;

select 
  c.relname 表名,
  cast(obj_description(relfilenode,'pg_class') as varchar) 名称,
  a.attname 字段,
  d.description 字段备注,
  concat_ws('',t.typname,SUBSTRING(format_type(a.atttypid,a.atttypmod) from '\(.*\)')) as 列类型 
from 
  pg_class c,
  pg_attribute a,
  pg_type t,
  pg_description d
where 
  a.attnum>0 
  and 
  a.attrelid=c.oid 
  and 
  a.atttypid=t.oid 
  and 
  d.objoid=a.attrelid 
  and 
  d.objsubid=a.attnum
  and 
  c.relname in (
    select 
	tablename 
	from 
	pg_tables 
	where 
	schemaname='public' 
	and 
	position('_2' in tablename)=0
	) 
order by c.relname,a.attnum;

docker exec -it postgres psql -U postgres -d concise

docker cp fixtures postgres:/tmp/

docker exec -it postgres psql -U postgres -d concise -f /tmp/fixtures/dwd_promotion_activity_di_1d.sql
docker exec -it postgres psql -U postgres -d concise -f /tmp/fixtures/dwd_rival_stats_distincted_di_1d.sql
docker exec -it postgres psql -U postgres -d concise -f /tmp/fixtures/dwd_store_common_commodity_di_1d.sql
docker exec -it postgres psql -U postgres -d concise -f /tmp/fixtures/dwd_store_common_commodity_extra_di_1d.sql
docker exec -it postgres psql -U postgres -d concise -f /tmp/fixtures/dwd_store_common_meituan_commodity_category_di_1d.sql
docker exec -it postgres psql -U postgres -d concise -f /tmp/fixtures/dwd_store_common_week_di_1d.sql
docker exec -it postgres psql -U postgres -d concise -f /tmp/fixtures/dwd_store_sales_commodity_availability_di_1d.sql
docker exec -it postgres psql -U postgres -d concise -f /tmp/fixtures/dwd_store_sales_commodity_stats_di_1d.sql



cp target/x86_64-unknown-linux-musl/release/data-lakehouse ~/Workspace/aigcengine/concise-bin/